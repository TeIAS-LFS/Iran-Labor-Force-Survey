W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
W3 <- W3%>%
select(Pkey,IW_Seasonly)
FORM2JOZ <- FORM2JOZ %>%
select(Pkey,Relation,F2_D12)
F2_W <- left_join(FORM2JOZ,W3,key = "Pkey")
F2J_total <-  bind_rows(F2J_total,F2_W)
}
rm(F2_W,FORM2JOZ,W3)
C_HHID_IID <- readRDS("F:/LFS/Code/Consistency/C_HHID_IID.RDS")
F2J_total <- left_join(F2J_total,C_HHID_IID,key = "Pkey")
View(C_HHID_IID)
rm(C_HHID_IID)
View(F2J_total)
A <- F2J_total%>%
filter(F2_D12 != "NR")
View(A)
B <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)
View(B)
B <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)%>%
arrange(C_HHID,C_IID)
View(B)
rm(list=ls())
F2J_total <- tibble()
for (year in 84:98) {
FORM2JOZ <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
W3 <- W3%>%
select(Pkey,IW_Seasonly)
FORM2JOZ <- FORM2JOZ %>%
select(Pkey,Relation,F2_D12)
F2_W <- left_join(FORM2JOZ,W3,key = "Pkey")
F2J_total <-  bind_rows(F2J_total,F2_W)
}
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
F2J_total <- tibble()
for (year in 84:98) {
FORM2JOZ <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
W3 <- W3%>%
select(Pkey,IW_Seasonly)
FORM2JOZ <- FORM2JOZ %>%
select(Pkey,Relation,F2_D12)
F2_W <- left_join(FORM2JOZ,W3,key = "Pkey")
F2J_total <-  bind_rows(F2J_total,F2_W)
}
rm(F2_W,FORM2JOZ,W3)
F2J_total <- left_join(F2J_total,C_HHID_IID,key = "Pkey")
C_HHID_IID <- readRDS("F:/LFS/Code/Consistency/C_HHID_IID.RDS")
F2J_total <- left_join(F2J_total,C_HHID_IID,key = "Pkey")
rm(C_HHID_IID)
View(F2J_total)
levels(F2J_total$F2_D12)
F2J_total <- F2J_total%>%
mutate(Cause = ifelse(F2_D12!="NR" & F2_D12!="With Family" ,F2_D12,NA))
View(F2J_total)
A <- F2J_total%>%
filter(F2_D12 != "NR")
F2J_total <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)
F2J_total <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)
F2J_total <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%in%
arrange(C_HHID,C_IID,Year,Season)
F2J_total <- F2J_total%>%
filter(C_HHID %in% A$C_HHID)%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_HHID,C_IID,Year,Season)
View(F2J_total)
F2J_total <- tibble()
for (year in 84:98) {
FORM2JOZ <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
W3 <- W3%>%
select(Pkey,IW_Seasonly)
FORM2JOZ <- FORM2JOZ %>%
select(Pkey,Relation,F2_D12)
F2_W <- left_join(FORM2JOZ,W3,key = "Pkey")
F2J_total <-  bind_rows(F2J_total,F2_W)
}
F2J_total <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_HHID,C_IID,Year,Season)
C_HHID_IID <- readRDS("F:/LFS/Code/Consistency/C_HHID_IID.RDS")
rm(F2_W,FORM2JOZ,W3)
F2J_total <- left_join(F2J_total,C_HHID_IID,key = "Pkey")
rm(C_HHID_IID)
View(F2J_total)
F2J_total <- F2J_total%>%
group_by(C_HHID)%>%
dplyr::mutate(W_Khanevar_Y = mean(IW_Seasonly,na.rm = TRUE))
F2J_total <- F2J_total%>%
group_by(C_HHID)%>%
dplyr::mutate(W_Khanevar_Y = mean(IW_Seasonly,na.rm = TRUE)/4)
View(F2J_total)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_HHID,C_IID,Year,Season)
View(F2J_total_F)
level(F2J_total_F$F2_D12)
levels(F2J_total_F$F2_D12)
F2J_total_F <-  F2J_total_F%>%
mutate(Cause = ifelse(F2_D12!="With Family",F2_D12,NA))%>%
group_by(C_HHID,Year,Season)%>%
dplyr::mutate(Cause_F = mean(Cause,na.rm = TRUE))
View(F2J_total_F)
levels(F2J_total_F$F2_D12)
F2J_total_F <- F2J_total_F%>%
mutate(Cause_F = ifelse(is.nan(Cause_F),5,Cause_F))
View(F2J_total_F)
A <- F2J_total_F%>%
filter(Cause_F %in% c(1,2,3,4,5,6,7))
A <- F2J_total_F%>%
filter(!Cause_F %in% c(1,2,3,4,5,6,7))
View(A)
View(F2J_total_F)
B <- F2J_total%>%
filter(Relation == "Head")
B <- F2J_total_F%>%
filter(Relation == "Head")
View(B)
A <- F2J_total_F%>%
arrange(C_IID)%>%
distinct(C_IID,.keep_all = TRUE)
View(A)
F2J_total_F <- F2J_total_F%>%
arrange(C_IID)%>%
distinct(C_IID,.keep_all = TRUE)
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
F2J_total <- tibble()
for (year in 84:98) {
FORM2JOZ <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
W3 <- W3%>%
select(Pkey,IW_Seasonly)
FORM2JOZ <- FORM2JOZ %>%
select(Pkey,Relation,F2_D12)
F2_W <- left_join(FORM2JOZ,W3,key = "Pkey")
F2J_total <-  bind_rows(F2J_total,F2_W)
}
C_HHID_IID <- readRDS("F:/LFS/Code/Consistency/C_HHID_IID.RDS")
rm(F2_W,FORM2JOZ,W3)
F2J_total <- left_join(F2J_total,C_HHID_IID,key = "Pkey")
rm(C_HHID_IID)
F2J_total <- F2J_total%>%
group_by(C_HHID)%>%
dplyr::mutate(W_Khanevar_Y = mean(IW_Seasonly,na.rm = TRUE)/4)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(F2_D12!="With Family",F2_D12,NA))%>%
group_by(C_HHID,Year,Season)%>%
dplyr::mutate(Cause_F = mean(Cause,na.rm = TRUE))
View(F2J_total_F)
A <- F2J_total%>%
filter(F2_D12 != "NR")
A <- F2J_total%>%
filter(F2_D12 != "NR")%>%
distinct(C_IID,.keep_all = T)
View(F2J_total_F)
A <- F2J_total_F%>%
distinct(C_HHID,.keep_all = T)
View(A)
View(A)
A <- F2J_total_F%>%
distinct(C_HHID,.keep_all = T)%>%
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 1])
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 1])
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 1],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 2],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 3],na.rm = TRUE)
levels(A$F2_D12)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 4],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 4],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 5],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 6],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$Cause_F == 7],na.rm = TRUE)
View(A)
View(F2J_total_F)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12!="With Family",F2_D12,NA))%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 == "With Family",100,NA))
View(F2J_total_F)
levels(F2J_total$F2_D12)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 != "With Family",F2_D12,NA))%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 == "With Family",100,NA))
View(F2J_total_F)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 != "With Family",F2_D12,NA))%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 == "With Family",100,Cause))
View(F2J_total_F)
A <- F2J_total_F%>%
filter(Cause ==  100)
B <- F2J_total_F%>%
filter(C_HHID %in% A$C_HHID)
View(B)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 != "With Family",F2_D12,NA))%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 == "With Family",100,Cause))%>%
mutate(Cause_1 = ifelse(F2_D12!="With Family",F2_D12,NA))%>%
group_by(C_HHID,Year,Season)%>%
dplyr::mutate(Cause_2 = mean(Cause,na.rm = TRUE))
View(F2J_total_F)
F2J_total_F <- F2J_total_F%>%
mutate(Cause_F = case_when(
Relation == "Head" &  F2_D12 != "With Family" ~ Cause,
Relation == "Head" &  F2_D12 == "With Family" & !is.nan(Cause_F)~ Cause_F
Relation == "Head" &  F2_D12 == "With Family" &  is.nan(Cause_F)~ 5
))
F2J_total_F <- F2J_total_F%>%
mutate(Cause_F = case_when(
Relation == "Head" &  F2_D12 != "With Family" ~ Cause,
Relation == "Head" &  F2_D12 == "With Family" & !is.nan(Cause_F)~ Cause_F,
Relation == "Head" &  F2_D12 == "With Family" &  is.nan(Cause_F)~ 5
))
F2J_total_F <- F2J_total_F%>%
mutate(Cause_F = case_when(
Relation == "Head" &  F2_D12 != "With Family" ~ Cause,
Relation == "Head" &  F2_D12 == "With Family" & !is.nan(Cause_2)~ Cause_2,
Relation == "Head" &  F2_D12 == "With Family" &  is.nan(Cause_2)~ 5
))
View(F2J_total_F)
F2J_total_F <- F2J_total%>%
filter(F2_D12 != "NR")%>%
mutate(Year = str_sub(Pkey,1,2))%>%
mutate(Season = str_sub(Pkey,3,4))%>%
arrange(C_IID,Year,Season)%>%
distinct(C_IID,.keep_all = TRUE)%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 != "With Family",F2_D12,NA))%>%
mutate(Cause = ifelse(Relation == "Head" & F2_D12 == "With Family",100,Cause))%>%
mutate(Cause_1 = ifelse(F2_D12!="With Family",F2_D12,NA))%>%
group_by(C_HHID,Year,Season)%>%
dplyr::mutate(Cause_2 = mean(Cause_1,na.rm = TRUE))
F2J_total_F <- F2J_total_F%>%
mutate(Cause_F = case_when(
Relation == "Head" &  F2_D12 != "With Family" ~ Cause,
Relation == "Head" &  F2_D12 == "With Family" & !is.nan(Cause_2)~ Cause_2,
Relation == "Head" &  F2_D12 == "With Family" &  is.nan(Cause_2)~ 5
))
View(F2J_total_F)
A <- F2J_total_F%>%
distinct(C_HHID,.keep_all = T)
View(F2J_total_F)
View(A)
A <- F2J_total_F%>%
filter(Relation == "Head")
View(A)
A <- F2J_total_F%>%
group_by(C_HHID)%>%
dplyr::mutate(C_F = mean(Cause_F,na.rm = T))
View(A)
A <- F2J_total_F%>%
group_by(C_HHID)%>%
dplyr::mutate(C_F = mean(Cause_F,na.rm = T))%>%
mutate(C_F = ifelse(is.nan(C_F),5,C_F))%>%
distinct(C_HHID,.keep_all = T)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 1],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 2],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 2],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 3],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 4],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 5],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 3],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 6],na.rm = TRUE)
sum(A$W_Khanevar_Y[A$Year == "84" & A$C_F == 7],na.rm = TRUE)
View(A)
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
W3_T <- readRDS("F:/LFS/Code/Consistency/W3_T.RDS")
View(W3_T)
read_xlsx("C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.xlsx")
County_ID<- read_xlsx("C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.xlsx")
County_ID <- left_join(W3_T,County_ID,key = "HHID")
View(County_ID)
County_ID <- County_ID%>%
select(Pkey,Shahrestan)
View(County_ID)
County_ID <- County_ID%>%
mutate(Shahrestan = case_when(
nchar(Shahrestan) == 1 ~ paste0("0",Shahrestan),
nchar(Shahrestan) == 2 ~ Shahrestan
))
County_ID <- County_ID%>%
mutate(Shahrestan = case_when(
nchar(Shahrestan) == 1 ~ paste0("0",Shahrestan),
nchar(Shahrestan) == 2 ~ paste0(Shahrestan)
))
saveRDS("C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.RDS")
saveRDS(County_ID,"C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.RDS")
County_ID <- readRDS("C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.RDS")
View(County_ID)
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
for (year in 84:98) {
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
E <- readRDS(paste0(Processd_data_Path,"/",year,"/Eshteghal_Bikari.RDS"))
W3 <- left_join(W3,E,key = "Pkey")
F2 <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3_F2 <- left_join(W3,F2,key = "Pkey")
W3_T <- bind_rows(W3_T,W3_F2)
}
W3_T <- tibble()
for (year in 84:98) {
W3 <- readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
E <- readRDS(paste0(Processd_data_Path,"/",year,"/Eshteghal_Bikari.RDS"))
W3 <- left_join(W3,E,key = "Pkey")
F2 <- readRDS(paste0(Processd_data_Path,"/",year,"/FORM2JOZ.RDS"))
W3_F2 <- left_join(W3,F2,key = "Pkey")
W3_T <- bind_rows(W3_T,W3_F2)
}
EMPR <- W3_T %>%
group_by(Year,Province_ID)%>%
dplyr::summarise(EMPR = sum(Adj_IW_Seasonly*SHAGHEL,na.rm = TRUE)/(sum(Adj_IW_Seasonly*SHAGHEL,na.rm = TRUE)+sum(Adj_IW_Seasonly*BIKAR,na.rm = TRUE)))
POP <- W3_T %>%
group_by(Year,Province_ID)%>%
dplyr::summarise(Population = sum(Adj_IW_Seasonly,na.rm = TRUE)/4)
Out_Migration <- W3_T %>%
filter(F2_D11 %in% c("Other City Other Province","Other Village Other Province"))%>%
distinct(IID,.keep_all = TRUE)%>%
group_by(Year,F2_D13)%>%
dplyr::summarise(Out_migration =sum(IW_Seasonly,na.rm = TRUE))%>%
rename(replace = c(F2_D13= "Province_ID") )
In_Migration <- W3_T %>%
filter(F2_D11 %in% c("Other City Other Province","Other Village Other Province"))%>%
distinct(IID,.keep_all = TRUE)%>%
group_by(Year,Province_ID)%>%
dplyr::summarise(In_migration =sum(IW_Seasonly,na.rm = TRUE))
inter_migration <- left_join(EMPR,POP, key=c("Year","Province_ID"))
inter_migration <- left_join(inter_migration,Out_Migration, key=c("Year","Province_ID"))
inter_migration <- left_join(inter_migration,In_Migration , key=c("Year","Province_ID"))
inter_migration <- inter_migration %>%
mutate_at(vars(Province_ID),as.factor)
levels(inter_migration$Province_ID)[1] <- "Markazi"
levels(inter_migration$Province_ID)[2] <- "Gilan"
levels(inter_migration$Province_ID)[3] <- "Mazandaran"
levels(inter_migration$Province_ID)[4] <- "East_Azarbaijan"
levels(inter_migration$Province_ID)[5] <- "West_Azarbaijan"
levels(inter_migration$Province_ID)[6] <- "Kermanshah"
levels(inter_migration$Province_ID)[7] <- "Khuzestan"
levels(inter_migration$Province_ID)[8] <- "Fars"
levels(inter_migration$Province_ID)[9] <- "Kerman"
levels(inter_migration$Province_ID)[10] <- "Khorasan_Razavi"
levels(inter_migration$Province_ID)[11] <- "Esfahan"
levels(inter_migration$Province_ID)[12] <- "Sistan_baluchestan"
levels(inter_migration$Province_ID)[13] <- "Kordestan"
levels(inter_migration$Province_ID)[14] <- "Hamedan"
levels(inter_migration$Province_ID)[15] <- "Chaharmahal_Bakhtiari"
levels(inter_migration$Province_ID)[16] <- "Lorestan"
levels(inter_migration$Province_ID)[17] <- "Ilam"
levels(inter_migration$Province_ID)[18] <- "Kohgiluyeh_Boyer_Ahmad"
levels(inter_migration$Province_ID)[19] <- "Bushehr"
levels(inter_migration$Province_ID)[20] <- "Zanjan"
levels(inter_migration$Province_ID)[21] <- "Semnan"
levels(inter_migration$Province_ID)[22] <- "Yazd"
levels(inter_migration$Province_ID)[23] <- "Hormozgan"
levels(inter_migration$Province_ID)[24] <- "Tehran"
levels(inter_migration$Province_ID)[25] <- "Ardabil"
levels(inter_migration$Province_ID)[26] <- "Ghom"
levels(inter_migration$Province_ID)[27] <- "Ghazvin"
levels(inter_migration$Province_ID)[28] <- "Golestan"
levels(inter_migration$Province_ID)[29] <- "North_Khorasan"
levels(inter_migration$Province_ID)[30] <- "South_Khorasan"
levels(inter_migration$Province_ID)[31] <- "Alborz"
inter_migration <- inter_migration%>%
mutate(Net_migration = In_migration - Out_migration)%>%
mutate_at(vars(Year),as.character)
ggplot(inter_migration)+
geom_line(aes(x=Year,y=Net_migration/1000,group = 1))+
facet_wrap(~Province_ID %in% c("Alborz","South_Khorasan"),nrow = 2)
View(inter_migration)
A <- inter_migration %>%
group_by(Year)%>%
dplyr::summarise(OM = sum(Out_migration))
View(A)
A <- inter_migration %>%
group_by(Year)%>%
dplyr::summarise(OM = sum(Out_migration,na.rm = T))
ggplot(A)%>%
geom_line(aes(X=Year,y=OM/1000,group = 1))
ggplot(A)+
geom_line(aes(X=Year,y=OM/1000,group = 1))
ggplot(A)+
geom_line(aes(x=Year,y=OM/1000,group = 1))
B <- inter_migration %>%
group_by(Year)%>%
dplyr::summarise(IM = sum(In_migration,na.rm = T))
View(B)
View(inter_migration)
C <- inter_migration%>%
arrange(Province_ID)
View(C)
View(inter_migration)
D <- inter_migration%>%
group_by(Province_ID)%>%
dplyr::mutate(Mean_OM = mean(Out_migration,na.rm = T))%>%
dplyr::mutate(Mean_IM = mean(In_migration ,na.rm = T))%>%
dplyr::mutate(Mean_NM = mean(Net_migration))
View(D)
View(D)
D <- inter_migration%>%
mutate(PRNM = Net_migration / Population)%>%
group_by(Province_ID)%>%
dplyr::mutate(Mean_PRNM = mean(PRNM,na.rm = T))%>%
select(Province_ID,Mean_PRNM)
View(D)
D <- inter_migration%>%
mutate(PRNM = Net_migration / Population*100)%>%
group_by(Province_ID)%>%
dplyr::summarise(Mean_PRNM = mean(PRNM,na.rm = T))
View(D)
ggplot(inter_migration)%>%
geom_bar(aes(x= Province_ID,y = PRNM))
ggplot(inter_migration)+
geom_bar(aes(x= Province_ID,y = PRNM))
ggplot(inter_migration)+
geom_bar(aes(x= Province_ID,y = Mean_PRNM))
View(D)
ggplot(D)+
geom_bar(aes(x= Province_ID,y = Mean_PRNM))
geom_bar(aes(x= Province_ID)
ggplot(D)+
geom_bar(aes(x= Province_ID))
ggplot(D)+
geom_bar(Province_ID)
write_xlsx(D,"C:/Users/ali/A.xlsx")
write_xlsx(D,"C:/Users/ali/Desktop/A.xlsx")
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
readRDS(paste0(Processd_data_Path,"/",year,"/W3.RDS"))
C_HHID_IID <- readRDS("C:/Users/ali/Dropbox/LFS Cleaning/Files/C_HHID_IID.RDS")
County_ID <- readRDS("C:/Users/ali/Dropbox/LFS Cleaning/Files/County_ID.RDS")
Files_paths
View(C_HHID_IID)
View(County_ID)
W3 <- readRDS("F:/LFS/Processed data/96/W3.RDS")
View(W3)
rm(list=ls())
#code_path = "C:/Users/pc/Dropbox/Research/Labor Market/LFS Cleaning/R Codes"
code_path  = "C:/Users/ali/Dropbox/LFS Cleaning/R Codes"
source(paste0(code_path,"/","101_modify_settings.R"))
source(paste0(code_path,"/","110_Installing_packages.R"))
source(paste0(code_path,"/","120_Building_directory.R"))
#source(paste0(code_path,"/","130_Downloding_rawdata.R"))
source(paste0(code_path,"/","140_Create_path.R"))
source(paste0(code_path,"/","190_W3_Cleaning.R"))
##
